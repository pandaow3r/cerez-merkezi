<header class="topbar">
  <div class="topbar-content">
    <img src="https://cdn-icons-png.flaticon.com/512/1047/1047711.png" alt="Çerez ikonu" class="topbar-logo" />
    <h1>Çerez Merkezi</h1>
  </div>
</header>
<main class="main">
  <form (submit)="onSearch($event)">
    <div class="search-bar-container">
      <input type="text" placeholder="Şehir adı girin..." [(ngModel)]="city" name="city" required />
      <button type="submit" aria-label="Ara">
        Ara
        <svg viewBox="0 0 20 20"><circle cx="9" cy="9" r="7" stroke="currentColor" stroke-width="2" fill="none"/><line x1="14.5" y1="14.5" x2="19" y2="19" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
      </button>
    </div>
  </form>
  <ng-container *ngIf="events !== undefined">
    <section *ngIf="loading">
      <p>Yükleniyor...</p>
    </section>
    <section *ngIf="error">
      <p style="color: #d32f2f;">{{ error }}</p>
    </section>
    <section *ngIf="pagedEvents?.length" class="event-list">
      <div *ngFor="let event of pagedEvents" class="event-card mini">
        <img [src]="event.image || 'https://via.placeholder.com/400x200?text=Etkinlik'" alt="Etkinlik görseli" class="event-img" />
        <div class="event-header">
          <h3>{{ event.title || 'Başlık yok' }}</h3>
          <span class="event-date">{{ event.date || '' }}</span>
        </div>
        <div class="event-location">{{ event.location || '' }}</div>
        <div class="event-desc">{{ event.description || '' }}</div>
        <a *ngIf="event.url" [href]="event.url" class="event-detail-btn" target="_blank" rel="noopener">Detayı Gör</a>
      </div>
    </section>
    <nav *ngIf="totalPages > 1" class="pagination">
      <button (click)="goToPage(currentPage - 1)" [disabled]="currentPage === 1">&laquo;</button>
      <button *ngFor="let page of [].constructor(totalPages); let i = index" (click)="goToPage(i + 1)" [class.active]="currentPage === (i + 1)">{{ i + 1 }}</button>
      <button (click)="goToPage(currentPage + 1)" [disabled]="currentPage === totalPages">&raquo;</button>
    </nav>
    <section *ngIf="events && !events.length && !loading && !error">
      <p>Bu şehir için etkinlik bulunamadı.</p>
    </section>
  </ng-container>
</main>
